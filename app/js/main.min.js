"use strict";function showDefaultPopup(e,t){var o=e,n=document.querySelector('#mdl-popup [data-popup="'.concat(o,'"]'));if(n){var a=document.querySelector("body");n.querySelector(".popup-message").innerText=t,n.classList.add("visible"),n.closest("#mdl-popup").classList.add("visible"),a.classList.add("scroll-lock")}}function setSearchListeners(){var e=document.querySelector("[data-search=tab]"),t=document.querySelector("[data-search=input]"),o=document.querySelector("[data-search=close]"),n="mobile-view";t&&e&&t.addEventListener("click",(function(){e.classList.contains(n)||e.classList.add(n)})),o&&e&&t&&o.addEventListener("click",(function(){e.classList.remove(n),t.value=""}))}function setMenuListeners(){var e=document.querySelector("[data-navibar-header-toggle]"),t=document.querySelector("[data-navibar]"),o="is-open";t&&e&&(window.addEventListener("click",(function(){t.classList.remove(o),e.classList.remove(o)})),e.addEventListener("click",(function(n){n.stopPropagation(),t.classList.toggle(o),e.classList.toggle(o)}))),t&&t.addEventListener("click",(function(e){t.classList.contains(o)&&e.stopPropagation()}))}window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){for(var t=this;t;){if(t.matches(e))return t;t=t.parentElement}return null}),window.addEventListener("DOMContentLoaded",(function(){null!==document.querySelector(".owl-carousel")&&$(".owl-carousel").owlCarousel({loop:!0,margin:10,autoWidth:!0,navText:["&lsaquo;","&rsaquo;"],responsive:{0:{items:1,nav:!1},600:{items:3,nav:!1},1e3:{items:5,nav:!0,loop:!1}}});var e=document.querySelectorAll("[data-popup-toggle]"),t=document.getElementById("mdl-popup");function o(e){e.preventDefault();var t=this.dataset.popupId,o=document.querySelector('#mdl-popup [data-popup="'.concat(t,'"]'));if(o){var n=document.querySelector("body");o.classList.add("visible"),o.closest("#mdl-popup").classList.add("visible"),n.classList.add("scroll-lock")}}0!==e.length&&e.forEach((function(e){return e.addEventListener("click",o)})),t&&t.addEventListener("click",(function(e){if("mdl-popup"===e.target.id||e.target.classList.contains("mdl-btn-close")){var t=e.target.closest("#mdl-popup"),o=t.querySelector(".visible"),n=document.querySelector("body");o.classList.remove("visible"),t.classList.remove("visible"),n.classList.remove("scroll-lock")}}))})),setSearchListeners(),setMenuListeners(),$(".pagenav li").each((function(e,t){$(t).hasClass("current_page_item")&&$(t).parent().show().parent().addClass("open")}));var elements=document.querySelectorAll("#body-sidebar > div.sidebar-accordion > ul > li.pagenav > h4 > i ");0!==elements.length&&elements.forEach((function(e){e.addEventListener("click",(function(){$(this).closest("li").toggleClass("open"),$(this).parent().parent().find("ul").slideToggle(100)}))}));var navFilterBtns=document.querySelectorAll(".nav-filter-item .nav-filter-item-dropdown");function setActiveFilterBtn(e){navFilterBtns.forEach((function(t){t!==e.target&&(t.classList.remove("active"),t.nextElementSibling.classList.remove("active"))})),e.target.classList.toggle("active"),e.target.nextElementSibling.classList.toggle("active")}0!==navFilterBtns.length&&navFilterBtns.forEach((function(e){return e.addEventListener("click",setActiveFilterBtn)}));var navFilter=document.querySelector(".nav-filter");if(navFilter){var hideFilterDropdowns=function(e){if(!e.target.closest(".nav-filter-item")){var t=document.querySelectorAll(".nav-filter-dropdown-content");0!==t.length&&t.forEach((function(e){e.classList.remove("active"),e.previousElementSibling.classList.remove("active")}))}};navFilter.addEventListener("click",(function(e){console.log(e.target.classList);var t=document.querySelector("#nav-filter-sortBy .nav-filter-item-dropdown"),o=document.querySelector("#nav-filter-sortBy .nav-filter-dropdown-content"),n=document.querySelector("#mobile-nav-filter .nav-filter-item-dropdown"),a=document.querySelector("#mobile-nav-filter .nav-filter-dropdown-content");!e.target.classList.contains("sortByFilter")&&t&&o&&(t.classList.remove("active"),o.classList.remove("active")),!e.target.classList.contains("navFilter")&&n&&a&&(n.classList.remove("active"),a.classList.remove("active"))}));var body=document.querySelector("body");body.addEventListener("click",hideFilterDropdowns)}var dropDownMenus=[],dropDownMenuHide=function(e,t){e.classList.remove("dropdown-menu-open"),t.classList.remove("dropdown-toggle-open")},dropDownMenuShow=function(e,t){dropDownMenus.forEach((function(e){dropDownMenuHide(e.menu,e.toggle)})),t.classList.add("dropdown-toggle-open"),e.classList.add("dropdown-menu-open")},dropDownMenuToggle=function(e,t){!0===e.classList.contains("dropdown-menu-open")?dropDownMenuHide(e,t):dropDownMenuShow(e,t)},mq=window.matchMedia("(max-width: 767px)");function mqMatchesDropDownMenuHide(){mq.matches||dropDownMenus.forEach((function(e){dropDownMenuHide(e.menu,e.toggle)}))}mq.addEventListener?mq.addEventListener("change",mqMatchesDropDownMenuHide):mq.addListener(mqMatchesDropDownMenuHide);var dropDownItems=document.querySelectorAll(".dropdown-item");if(mq.matches||dropDownItems.forEach((function(e){var t=e.querySelector(".dropdown-menu");t&&t.classList.remove("dropdown-menu-open")})),0!==dropDownItems.length){var accourdion_init=function(){hideAll(),activateLinks()},hideAll=function(){for(var e=document.querySelectorAll(".accordion_content"),t=0;t<e.length;t++)e[t].style.display="none";for(e=document.querySelectorAll('.accordion_title .delivery-panel-item-radio input[type="radio"]'),t=0;t<e.length;t++)e[t].checked=!1},showTab=function(e){document.querySelectorAll('.accordion_content[for="'+e+'"]')[0].style.display="",document.querySelectorAll('.accordion_title[id="'+e+'"] .delivery-panel-item-radio input[type="radio"]')[0].checked=!0},activateLinks=function(){for(var e=document.querySelectorAll(".accordion_title"),t=0;t<e.length;t++)e[t].addEventListener("click",(function(e){accordion_click(e)}),!1);var o=document.querySelectorAll(".tab_buttons");for(t=0;t<o.length;t++)o[t].addEventListener("click",(function(e){return search_btn_click(e),!1}),!1)},accordion_click=function(e){var t=e.currentTarget.id;hideAll(),showTab(t)},search_btn_click=function(e){e.preventDefault();var t=e.currentTarget.id,o=t.slice(7),n=t.slice(11);loadData(n,document.getElementById("input_post_"+o).value,document.getElementById("input_street_"+o).value)},httpGet=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},loadData=function(e,t,o){for(var n=httpGet("https://my-json-server.typicode.com/CAHCAHbI4/t20221208/db?param1="+t+"&param2="+o),a=JSON.parse(n),i="",r=0;r<a.pickup_locations.length;r++){var c=a.pickup_locations[r].name+" ("+a.pickup_locations[r].distance+"), "+a.pickup_locations[r].address.address+", "+a.pickup_locations[r].address.postcode+" "+a.pickup_locations[r].address.city;i+='<div class="delivery-panel-pickup-radio"><input type="radio" value="{item_id}" name="{subgroup_name}" id="{subgroup_id}" ></div><div class="delivery-panel-pickup-shop"><label for="{subgroup_id}">{item_text}</label></div><div class="delivery-panel-pickup-divider"></div>'.replaceAll("{subgroup_name}","subgroup"+e).replaceAll("{subgroup_id}","subgroup"+e+"_"+(r+1)).replaceAll("{item_text}",c).replaceAll("{item_id}",a.pickup_locations[r].id)}document.querySelectorAll('.accordion_content[for="tab_'+e+'"] div.delivery-panel-pickup-shops')[0].innerHTML=i},form_send=function(e){var t="?";null!=document.querySelectorAll('input[name="group1"]:checked')[0]&&(t+="panelId="+document.querySelectorAll('input[name="group1"]:checked')[0].value,id=document.querySelectorAll('input[name="group1"]:checked')[0].id.split("_")[1],null!=document.querySelectorAll('input[name="subgroup'+id+'"]:checked')[0]&&(console.log(document.querySelectorAll('input[name="subgroup'+id+'"]:checked')[0]),t+="&subpanelId="+document.querySelectorAll('input[name="subgroup'+id+'"]:checked')[0].value)),window.open(window.location.host+t,"_blank")},getDeliveryPickupPoints=function(e){if(e.target.checked&&e.target.dataset.delivery){var t=e.target.closest(".delivery-panel-item.accordion_title");if(!t.nextElementSibling.querySelector(".delivery-panel-pickup-shops.active")){var o=e.target.value,n=t.getAttribute("id").toString(),a=document.querySelector("[for="+n+"] form input[name=countryCode]").value,i=document.querySelector("[for="+n+"] form input[name=zipCode]").value,r=document.querySelector("[for="+n+"] form input[name=address]").value;getPickupsJSON("?deliveryId="+o+"&countryCode="+a+"&zipCode="+i+"&address="+r,t)}}},getPickupsJSON=function(e,t){var o="__URL__",n=new XMLHttpRequest;console.log(o+e),n.open("GET",o+e),n.send(),n.onload=function(){200!=n.status?console.log("Error ".concat(n.status,": ").concat(n.statusText)):(renderPickupShops(n.response,t),console.log("Success ".concat(n.response.length," bytes")))}},renderPickupShops=function(e,t){var o=JSON.parse(e),n=t.getAttribute("id").toString(),a=t.nextElementSibling.querySelector(".delivery-panel-pickup-shops"),i="";a.classList.add("active"),o.forEach((function(e){i+='<div class="shop-container">\n                    <div class="delivery-panel-pickup-radio">\n                      <input type="radio" value="'.concat(e.id,'" name="').concat(e.name,'" id="').concat(n+"_shop",'" >\n                    </div>\n                    <div class="delivery-panel-pickup-shop">\n                      <label for="').concat(n+"_shop",'">\n                        ').concat(e.name," (").concat(parseFloat((e.distance/1e3).toFixed(1))," km), ").concat(e.address.street,", ").concat(e.address.zipCode||""," ").concat(e.address.city,'\n                      </label>\n                    </div>\n                    <div class="delivery-panel-pickup-divider"></div>\n                  </div>')})),a.innerHTML=i};dropDownItems.forEach((function(e){var t=e.querySelector(".dropdown-toggle"),o=e.querySelector(".dropdown-menu");if(null!=t&&null!=o){dropDownMenus.push({toggle:t,menu:o}),t.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),dropDownMenuToggle(o,t)}));var n=!1;o.addEventListener("mouseenter",(function(e){mq.matches||(n=!0)})),o.addEventListener("mouseleave",(function(e){mq.matches||(n=!1,dropDownMenuHide(o,t))})),t.addEventListener("mouseenter",(function(e){mq.matches||n||dropDownMenuToggle(o,t)})),t.addEventListener("mouseleave",(function(e){setTimeout((function(){mq.matches||n||dropDownMenuHide(o,t)}),1)}))}})),$(".minus-bt").click((function(){var e=parseFloat($("#qnty_txt").val());(1==e||e<1)&&(e=2);var t=e-1;$("#qnty_txt").val(t)})),$(".plus-bt").click((function(){var e=parseFloat($("#qnty_txt").val())+1;$("#qnty_txt").val(e)})),document.addEventListener("DOMContentLoaded",(function(){accourdion_init(),document.querySelectorAll(".sbmt_button")[0].addEventListener("click",(function(e){form_send(e)}),!1)}));var deliveryTypes=document.querySelectorAll(".delivery-panel-item.accordion_title");deliveryTypes.length>0&&deliveryTypes.forEach((function(e){e.addEventListener("change",getDeliveryPickupPoints)}))}function setUpExternalAuth(e){$('form[name="external-auth"]').submit((function(t){return t.preventDefault(),$.oauthpopup({path:e,callback:function(){console.log("popup closed")}}),!1}))}$("#modalLogin button[data-dismiss=modal]").click((function(){$("#errorDiv").empty()})),$("#modal_login_form").submit((function(e){e.preventDefault();var t={};t.ModalEmail=$("#ModalEmail").val(),t.ModalPassword=$("#ModalPassword").val(),$("#errorDiv").empty(),$("#modal_login_spinner").show(),$.ajax({type:"POST",url:"/My/Account/ModalLogin",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(t),async:!0,beforeSend:function(e){},success:function(e){$("#modal_login_spinner").hide(),1==e.success?window.location.reload():($("#errorDiv").empty(),$.each(e.errors,(function(e,t){$("#errorDiv").append("<p>"+t+"</p>")})),$("#errorDiv").removeClass("displayNone"))},failure:function(e){}})})),$.oauthpopup=function(e){e.windowName=e.windowName||"ConnectWithOAuth",e.windowOptions=e.windowOptions||"type=display",e.callback=e.callback||function(){window.location.reload()};var t=this;console.log(e.path),t._oauthWindow=window.open(e.path,e.windowName,e.windowOptions),t._oauthInterval=window.setInterval((function(){t._oauthWindow&&!t._oauthWindow.closed||(window.clearInterval(t._oauthInterval),e.callback())}),1e3)},$((function(){$("#inputSearch").autocomplete({showNoSuggestionNotice:!0,serviceUrl:"/front/search/SuggestionsSearch",minChars:2,beforeRender:function(e){e.find(".autocomplete-suggestion .product").parent().wrapAll('<div class="suggestions__product"/>'),e.find(".autocomplete-suggestion .default").parent().wrapAll('<div class="suggestions__default"/>')},formatResult:function(e,t){if(e.data.showAll){var o=e.data.suggestionsLenght||1;return'<a class="showAll" href='+e.data.link+">"+e.value+"</a>"}if("product"===e.data.type){var n='<div class="productInfo">'+('<img class="productImg" src="'+e.data.img+'" />')+('<div class="productText">'+('<div class="productName">'+e.value+"</div>")+"</div>")+"</div>",a='<div class="productPrice">'+e.data.price+"</div>";return'<a class="productFull product" href='+e.data.link+">"+n+a+"</a>"}o=e.data.suggestionsLenght||1;return'<a class="default" href='+e.data.link+"><span> "+e.value+"</span> in category ("+o+") </a>"},onSelect:function(e,t){var o=$(".autocomplete-suggestion.autocomplete-selected").find("a").attr("href");window.location.href=o},onSearchStart:function(){$(".js-search-icon").hide(),$(".js-search-icon-loader").show()},onSearchComplete:function(){$(".js-search-icon-loader").hide(),$(".js-search-icon").show()}})}));
//# sourceMappingURL=main.min.js.map
